!function(global,$){"use strict";$("input[name=OFM_ID]").first().focus();var returnUrl=$.url?$.url(location.href).param("returnUrl"):"";if(void 0===returnUrl||""==returnUrl){var referrerPath=document.referrer.replace(/^[^:]+:\/\/[^/]+/,"").replace(/#.*/,"");returnUrl="/account/join"===referrerPath||-1!==referrerPath.indexOf("/account/join?returnUrl=")||"/account/login"===referrerPath||-1!==referrerPath.indexOf("/account/login?returnUrl=")?"/":document.referrer?referrerPath:""}function loginSet(r){var e=$(".active").hasClass("non_member")?"non_member_":"",t=new Validate(".active .email",e+"login_email",".active .error_msg"),a=new Validate(".active .password",e+"login_password",".active .error_msg"),n=!1;return!0===t.validate()&&(n=!0===a.validate()),t.destroy(),a.destroy(),n}$("form").each(function(r,e){$(e.elements.returnUrl).val(returnUrl),$('a[href*="/account/join"]').not('[href*="?returnUrl="]').each(function(){var r=$(this);r.attr("href",r.attr("href")+"?returnUrl="+returnUrl)})}),$(".login_sso").each(function(r,e){var t=$(e),a=t.url(),n="",o=0;""!==a.attr("protocol")&&(n=n+a.attr("protocol")+"://"),n+=a.attr("host"),""!==a.attr("port")&&(n+=a.attr("port")),n+=a.attr("path"),$.each(a.param(),function(r,e){"returnUrl"!==r&&(n=0===o?n+"?"+r+"="+e:n+"&"+r+"="+e,o++)}),n=0===o?n+"?returnUrl="+returnUrl:n+"&returnUrl="+returnUrl,t.attr("href",n)}),$(".tab > h1").on("click",function(){$(this).parent().addClass("active").siblings().removeClass("active")}),$(".login_access_form").on("submit",function(evt){evt.preventDefault();var $form=$(this),$button=$(this).find("input[type=submit]");return!0===jQuery.browser.msie&&1*jQuery.browser.version<=9?form.submit():loginSet(evt)&&$.ajax({url:$form.attr("action"),type:$form.attr("method"),dataType:"json",cache:!1,data:$form.serialize()+"&callType=ajax",error:function(r,e){"timeout"===r&&$form.find(".error_msg").html("서버와의 연결이 원활하지 않습니다. 잠시후에 다시 시도해주세요.")},success:function(data){if("0000"===data.API_CODE){try{data.API_GTAG&&eval(data.API_GTAG)}catch(r){console.log(r)}location.href=data.API_DATA.returnUrl}else{var msg=data.API_MSG.replace(/\r\n/g,"<br>"),$error_msg=$form.find(".error_msg");$error_msg.removeClass("success").addClass("parsley_error"),$error_msg.find("ul").addClass("filled"),$error_msg.find("li").html(msg)}},xhrFields:{withCredentials:!0},crossDomain:!0}),!1});var $remember=$("#remember"),date=new Date;function setLoginCheckSetting(r){var e=$remember[0].checked?1:0;$.cookie("OFM_SPL",e,{expires:date,path:"/",domain:".onoffmix."+window.location.hostname.split(".").pop()})}date.setTime(date.getTime()+6e5),$remember.on("click",setLoginCheckSetting),setLoginCheckSetting()}(this,this.jQuery);